!function(e,r){"use strict";var t=angular.module("adf.widget.rpmsensor",["adf.provider","highcharts-ng"]);t.config(["dashboardProvider",function(e){e.widget("rpmsensor",{title:"Respiratory Rate",description:"This widget shows a chart of your breath rate",templateUrl:"{widgetsPath}/rpmsensor/src/view.html",controller:"rpmController",controllerAs:"rpm",reload:!0,edit:{templateUrl:"{widgetsPath}/rpmsensor/src/edit.html"}})}]),t.factory("socket",function(){var e=io.connect("http://127.0.1.1:3000");return e}),t.controller("rpmController",["$scope","$interval","socket",function(e,r,t){function o(e){for(var r=0,t=0,o=2;o<e.length;o++)parseFloat(e[o].frequency)>10&&(0==t&&(t=parseFloat(e[o-1].magnitude)),parseFloat(e[o].magnitude)>t&&(t=parseFloat(e[o].magnitude),r=o));return e[r].frequency}var a=this;a.frequency="Loading...",t.on("breathe data",function(r){for(var t=new Array,i=1;i<r.length;i++)t.push({x:parseFloat(r[i].frequency),y:parseFloat(r[i].magnitude)});a.frequency=o(r),e.chartConfig={options:{chart:{type:"line",animation:!1,zoomType:"x"},plotOptions:{line:{marker:{enabled:!1},animation:{duration:0}},series:{turboThreshold:1e4}}},title:{text:"Live RPM"},xAxis:{type:"categories",tickPixelInterval:100},yAxis:{title:{text:"Magnitude"},max:5,min:0},series:[{name:"RPM",data:t}]},e.$digest()})}]),angular.module("adf.widget.rpmsensor").run(["$templateCache",function(e){e.put("{widgetsPath}/rpmsensor/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/rpmsensor/src/view.html","<div ng-controller=rpmController><div ng-if=!chartConfig><h1>Loading...</h1></div><div ng-if=chartConfig><highchart id=chart1 config=chartConfig></highchart></div><div><h3>Frequency: {{rpm.frequency}}</h3></div></div>")}])}(window);